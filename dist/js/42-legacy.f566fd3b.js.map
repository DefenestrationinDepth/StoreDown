{"version":3,"file":"js/42-legacy.f566fd3b.js","mappings":"6JAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACE,MAAM,CAAC,eAAe,GAAG,MAAQ,KAAK,CAACF,EAAG,WAAW,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,IAAM,KAAK,CAACF,EAAG,KAAK,CAACG,YAAY,aAAa,CAACP,EAAIQ,GAAG,oBAAoB,GAAGJ,EAAG,WAAW,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,QAAUN,EAAIS,QAAQ,eAAe,GAAG,MAAQT,EAAIU,MAAM,SAAU,GAAMC,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,QAAQC,GAAG,SAASC,GAAO,MAAO,CAACX,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQS,EAAM,QAAUf,EAAIS,QAAQ,SAAWT,EAAIgB,eAAe,CAACH,IAAI,UAAUC,GAAG,WAAW,MAAO,CAACV,EAAG,UAAU,CAACE,MAAM,CAAC,OAAQ,EAAK,MAAQ,SAAS,CAACN,EAAIQ,GAAG,iCAAiCS,OAAM,QAAW,IAAI,IAAI,IAC9sBC,EAAkB,G,8BC8BtB,GACEC,WAAY,CACVC,gBAAe,KAEjBC,KAAM,KAAM,CACVC,iBAAiB,EAAAC,EAAA,KACjBb,MAAO,GACPD,QAAS,KAEXe,UACEvB,KAAKwB,cACLxB,KAAKyB,YAEPC,QAAS,CAKPF,YAAa,YACN,EAAAF,EAAA,MAKLK,EAAA,oBAAgCC,MAAMC,IACpCA,EAAOC,eAAeC,SAASC,IAC7BA,EAAMC,OAAOF,SAASG,IAChBA,EAAKC,YAETnC,KAAKQ,QAAQ4B,KAAK,CAChBC,KAAMH,EAAKI,YACXC,MAAOL,EAAKM,KACZC,MAAO,OACPP,KAAMA,EACNQ,UAAU,aAIfC,OAAOC,IACa,MAAjBA,EAAMC,QACR7C,KAAK8C,SAASC,KAAK,SAASH,SAOlCnB,SAAU,YACR,EAAAH,EAAA,KAAkB0B,cAAcC,QAAQ,CACtCC,MAAO,MACPC,MAAM,EACNC,cAAc,IACbC,GAAG,UAAWC,IACftD,KAAKS,MAAM2B,KAAKkB,EAAOC,QACtBF,GAAG,SAAUT,IACd5C,KAAK8C,SAASF,MAAM,UAAUA,SAOlC7B,SAAU,SAAUD,GAClB,OAAOd,KAAKwD,QAAQpB,KAAK,UAAUtB,EAAMoB,KAAKuB,UC9FmF,I,6ECOnIC,GAAY,OACd,EACA5D,EACAmB,GACA,EACA,KACA,KACA,MAIF,EAAeyC,EAAiB,QAShC,IAAkBA,EAAW,CAACC,OAAM,eAAW,eAAW,UAAM,YAAQ","sources":["webpack://storedown/./src/views/ChangeFeed.vue?4ead","webpack://storedown/src/views/ChangeFeed.vue","webpack://storedown/./src/views/ChangeFeed.vue?a83f","webpack://storedown/./src/views/ChangeFeed.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"grid-list-lg\":\"\",\"fluid\":\"\"}},[_c('v-layout',[_c('v-flex',{attrs:{\"xs6\":\"\"}},[_c('h4',{staticClass:\"display-1\"},[_vm._v(\"Change feed\")])])],1),_c('v-layout',[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"hide-actions\":\"\",\"items\":_vm.items,\"loading\":true},scopedSlots:_vm._u([{key:\"items\",fn:function(props){return [_c('ListColumnTypes',{attrs:{\"props\":props,\"headers\":_vm.headers,\"rowClick\":_vm.rowClick}})]}},{key:\"no-data\",fn:function(){return [_c('v-alert',{attrs:{\"value\":true,\"color\":\"info\"}},[_vm._v(\" No changes detected yet \")])]},proxy:true}])})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<v-container grid-list-lg fluid>\n  <v-layout>\n    <v-flex xs6>\n      <h4 class=\"display-1\">Change feed</h4>\n    </v-flex>\n  </v-layout>\n  <v-layout>\n    <v-flex xs12>\n      <v-data-table :headers=\"headers\" hide-actions :items=\"items\" :loading=\"true\">\n        <template v-slot:items=\"props\">\n          <ListColumnTypes :props=\"props\" :headers=\"headers\" :rowClick=\"rowClick\"/>\n        </template>\n        <template v-slot:no-data>\n          <v-alert :value=\"true\" color=\"info\">\n            No changes detected yet\n          </v-alert>\n        </template>\n      </v-data-table>\n    </v-flex>\n  </v-layout>\n</v-container>\n</template>\n\n<script>\nimport {\n  ConfigService\n} from '../services/Config.js'\nimport DatabaseService from '../services/Database.js'\nimport ListColumnTypes from '../components/ListColumnTypes'\n\nexport default {\n  components: {\n    ListColumnTypes\n  },\n  data: () => ({\n    DatabaseService: DatabaseService(),\n    items: [],\n    headers: []\n  }),\n  mounted () {\n    this.loadHeaders() // Don't need to reload with route change\n    this.loadData()\n  },\n  methods: {\n    /**\n     * Load and set data.headers\n     * @return {[type]} [description]\n     */\n    loadHeaders: function () {\n      if (!DatabaseService()) {\n        return\n      }\n\n      // Get config and headers\n      ConfigService.getConfigObject().then((config) => {\n        config.dataDefinition.forEach((group) => {\n          group.fields.forEach((item) => {\n            if (item.hideInList) { return }\n\n            this.headers.push({\n              text: item.displayName,\n              value: item.name,\n              align: 'left',\n              item: item, // So you can access all the parameters. Above are given in the data table support format.\n              sortable: false\n            })\n          })\n        })\n      }).catch((error) => {\n        if (error.status === 404) {} else {\n          this.$toasted.info(`Error ${error}`)\n        }\n      })\n    },\n    /**\n     * Setup load data\n     */\n    loadData: function () {\n      DatabaseService().getDatabase().changes({\n        since: 'now',\n        live: true,\n        include_docs: true\n      }).on('change', (change) => {\n        this.items.push(change.doc)\n      }).on('error', (error) => {\n        this.$toasted.error(`Error: ${error}`)\n      })\n    },\n    /**\n     * Hande logic for when a row is clicked\n     * @param  {[type]} props  [description]\n     */\n    rowClick: function (props) {\n      return this.$router.push(`/entry/${props.item._id}`)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChangeFeed.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChangeFeed.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChangeFeed.vue?vue&type=template&id=cd60687e&\"\nimport script from \"./ChangeFeed.vue?vue&type=script&lang=js&\"\nexport * from \"./ChangeFeed.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VAlert,VContainer,VDataTable,VFlex,VLayout})\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","headers","items","scopedSlots","_u","key","fn","props","rowClick","proxy","staticRenderFns","components","ListColumnTypes","data","DatabaseService","Database","mounted","loadHeaders","loadData","methods","Config","then","config","dataDefinition","forEach","group","fields","item","hideInList","push","text","displayName","value","name","align","sortable","catch","error","status","$toasted","info","getDatabase","changes","since","live","include_docs","on","change","doc","$router","_id","component","VAlert"],"sourceRoot":""}